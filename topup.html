<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Top-up | Gigantic Data Hub</title>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #4f46e5;
            --dark: #0f172a;
            --success: #10b981;
            --bg: #f8fafc;
        }
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter', sans-serif; }
        body { background: var(--bg); color: var(--dark); display: flex; justify-content: center; min-height: 100vh; padding: 20px; }
        
        .card {
            background: white; width: 100%; max-width: 400px; border-radius: 28px;
            padding: 30px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0; height: fit-content;
        }

        .header { text-align: center; margin-bottom: 25px; }
        .header i { font-size: 40px; color: var(--primary); margin-bottom: 10px; }
        .header h2 { font-size: 1.5rem; font-weight: 800; }

        .input-group { margin-bottom: 20px; }
        label { display: block; font-size: 0.75rem; font-weight: 700; color: #64748b; margin-bottom: 8px; text-transform: uppercase; }
        .input-wrapper { position: relative; }
        .input-wrapper span { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); font-weight: 800; }
        input { 
            width: 100%; padding: 15px 15px 15px 40px; border: 2px solid #f1f5f9; 
            border-radius: 12px; font-size: 1.1rem; font-weight: 600; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--primary); background: #fff; }

        .pay-btn {
            width: 100%; background: var(--primary); color: white; border: none;
            padding: 18px; border-radius: 15px; font-weight: 700; cursor: pointer;
            box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.4); transition: 0.3s;
            margin-bottom: 15px;
        }

        .whatsapp-btn {
            width: 100%; background: #25D366; color: white; border: none;
            padding: 15px; border-radius: 15px; font-weight: 700; cursor: pointer;
            text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 10px;
        }
    </style>
</head>
<body>

<div class="card">
    <div class="header">
        <i class="fas fa-wallet"></i>
        <h2>Fund Wallet</h2>
    </div>

    <div class="input-group">
        <label>Amount to deposit (GHS)</label>
        <div class="input-wrapper">
            <span>₵</span>
            <input type="number" id="amount" placeholder="0.00">
        </div>
    </div>

    <button class="pay-btn" onclick="payWithPaystack()">SECURE TOP-UP</button>

    <a href="https://wa.me/233549055308?text=Hello%20Admin,%20I%20need%20help%20with%20my%20topup." class="whatsapp-btn">
        <i class="fab fa-whatsapp"></i> Contact Admin for Help
    </a>
</div>

<script type="module">
    // Import your Firebase config here
    import { auth } from './firebase-config.js'; // Adjust path accordingly

    window.payWithPaystack = () => {
        const amount = document.getElementById('amount').value;
        const user = auth.currentUser;

        if (!user) return alert("Please login first");
        if (amount < 1) return alert("Min GH₵ 1.00");

        const handler = PaystackPop.setup({
            key: 'pk_live_faecdb3166144fadebd8269829343698dd43de63',
            email: user.email,
            amount: Math.round(amount * 100), // GHS to Pesewas
            currency: 'GHS',
            metadata: { 
                uid: user.uid,
                real_amount: amount 
            },
            callback: (response) => {
                alert("Payment received! Your wallet will be updated in a moment.");
                location.reload();
            }
        });
        handler.openIframe();
    };
</script>
</body>
</html>
